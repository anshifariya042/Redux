//postReducer



const initialState = {
  post: null,
  loading: false,
  error: null,
};

export function postReducer(state = initialState, action) {
  switch (action.type) {
    case "FETCH_POST_REQUEST":
      return { ...state, loading: true, error: null };

    case "FETCH_POST_SUCCESS":
      return { ...state, loading: false, post: action.payload };

    case "FETCH_POST_ERROR":
      return { ...state, loading: false, error: action.payload };

    default:
      return state;
  }
}


//postActions



export const fetchPostRequest = () => ({ type: "FETCH_POST_REQUEST" });
export const fetchPostSuccess = (post) => ({ type: "FETCH_POST_SUCCESS", payload: post });
export const fetchPostError = (error) => ({ type: "FETCH_POST_ERROR", payload: error });

export const fetchPost = (id) => {
  return async (dispatch) => {
    dispatch(fetchPostRequest());

    try {
      const response = await fetch(`https://jsonplaceholder.typicode.com/posts/${id}`);
      const data = await response.json();
      dispatch(fetchPostSuccess(data));
    } catch (error) {
      dispatch(fetchPostError(error.message));
    }
  };
};


//store.js


import { createStore, applyMiddleware, compose } from "redux";
import {thunk} from "redux-thunk";
import { postReducer } from "./postReducer";


const composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;

export const store = createStore(
  postReducer,
  composeEnhancers(applyMiddleware(thunk))

//App.jsx

import React, { useEffect } from "react";
import { useDispatch, useSelector } from "react-redux";
import { fetchPost } from "./postActions";

function App() {
  const { post, loading, error } = useSelector(state => state);
  const dispatch = useDispatch();

  useEffect(() => {
    dispatch(fetchPost(2)); 
  }, [dispatch]);

  return (
    <div>
      <h1>Redux Thunk API Example</h1>

      {loading && <p>Loading...</p>}
      {error && <p>Error: {error}</p>}

      {post && (
        <div>
          <h3>{post.title}</h3>
          <p>{post.body}</p>
        </div>
      )}
    </div>
  );
}

export default App;

//main,jsx


import React from "react";
import ReactDOM from "react-dom/client";
import { Provider } from "react-redux";
import App from "./App";
import { store } from "./store";

const root = ReactDOM.createRoot(document.getElementById("root"));
root.render(
  <Provider store={store}>
    <App />
  </Provider>
);
